<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="js/jquery_2.1.3.min.js"></script>
    <script src="js/pubnub-3.7.14.min.js"></script>
    <script src="js/webrtc.js"></script>
    <title>Kunal-Rai.Video.Stream</title>
</head>
<body>
<!-- Video Output Zone -->
<span>Your PHONE: </span>
<input id="myID" type="text" value="kunal"  /><br />
<span>Call Number: </span>
<input id="callID" type="text" value=""  /><br />
<button value="call" onclick="callPhone()" >Call</button>
<!-- Libs and Scripts -->
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

<script src="https://cdn.pubnub.com/pubnub.min.js"></script>
<script src="http://stephenlb.github.io/webrtc-sdk/js/webrtc.js"></script>

<div id="video-out"> Making a Call </div>

<script>

    var VideoChat = (function(){

        var phone = null;

        return {
            InitPhone : function(userId, elementId)
            {
                phone = PHONE({
                    number        : userId,
                    publish_key   :  'pub-c-bd763b10-ac21-4ff4-acc6-406abd20b874',
                    subscribe_key : 'sub-c-6d7bcf4a-5647-11e5-8a9f-0619f8945a4f',
                    ssl           : true
                });

                // When Call Comes In or is to be Connected
                phone.receive(function(session){
                    $("#"+elementId).empty();
                    // Display Your Friend's Live Video
                    session.connected(function(session){
                        PUBNUB.$(elementId).appendChild(session.video);
                    });
                });
            },

            Call : function(callID)
            {
                if (callID != null || callID != "")
                {
                    var session = phone.dial(callID);
                }
            }
        }})();

        VideoChat.InitPhone($("#myID").val() , 'video-out');

function callPhone(){
    VideoChat.Call($("#callID").val());
}
    //VideoChat.Call();


</script>





</body>
</html>