<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="js/jquery_2.1.3.min.js"></script>
    <script src="js/pubnub-3.7.14.min.js"></script>
    <script src="js/webrtc.js"></script>
    <title>Kunal-Rai.Video.Stream</title>
</head>
<body>

<div id="video-out"> Making a Call </div>
<input id="callID" type="text" value=""  /><br />
<button value="call" onclick="callPhone()" >Call</button>
<!-- Libs and Scripts -->
<script>var VideoChat=(function(){

    var phone = null;
    return {
        InitPhone:function(){
                phone = PHONE({
                number        : '1234',
                publish_key   : 'pub-c-bd763b10-ac21-4ff4-acc6-406abd20b874',
                subscribe_key : 'sub-c-6d7bcf4a-5647-11e5-8a9f-0619f8945a4f',
                ssl           : true
            });

            // When Call Comes In or is to be Connected
            phone.receive(function(session){

                // Display Your Friend's Live Video
                session.connected(function(session){
                    PUBNUB.$('video-out').appendChild(session.video);
                });
        });

    },
        Call: function(callID){
            if(phone==null)
            {
                phone = PHONE({
                    number        : '3456',
                    publish_key   : 'pub-c-bd763b10-ac21-4ff4-acc6-406abd20b874',
                    subscribe_key : 'sub-c-6d7bcf4a-5647-11e5-8a9f-0619f8945a4f',
                    ssl           : true
                });
            }
            phone.ready(function(){
                var session = phone.dial(callID);

            });
        }
    }




})();
function callPhone()
{
    VideoChat.Call($('#callID').val());
}

</script>









</body>
</html>